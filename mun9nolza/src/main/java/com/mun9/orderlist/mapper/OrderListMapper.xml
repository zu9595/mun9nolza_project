<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.mun9.orderlist.mapper.OrderListMapper">

 <!-- 마이페이지(주문내역조회): 로그인아이디-최근주문순 -->
 <select id="selectMyOrderList" resultType="orderlist" parameterType="String">
 	select o.order_date as "orderDate", o.order_no, p.pro_image, p.pro_name, od.de_pro_cnt, o.total_price, o.order_status,
 	       o.order_recipient, o.order_phone, o.order_addr, o.detail_addr
	from orderlist o, product p, orderdetail od
	where o.order_no = od.order_no
	and o.pro_code = p.pro_code
	and user_id= #{userId} order by order_date desc
 </select>

 <update id="updateOrderList" parameterType="int">
  	update orderlist set order_status = '주문취소' where order_no = #{orderNo}
 </update>
 
</mapper>